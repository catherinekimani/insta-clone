{% load bootstrap5 %}
{% load static %}
<link rel="stylesheet" href="https://fonts.google.com/">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<link rel="stylesheet" href="{% static 'css/explore.css' %}">

{% block navbar %}
{% include 'navbar.html'%}
{% endblock %}

<div class="explore col-md-6 m-auto"  >
	{% for post in post %}
	<div class="card" data-bs-toggle="modal" data-bs-target="#postModal{{post.id}}" >
		<img src="{{post.image.url}}" class="card-img full-view" alt="Image">
		<div class="card-overlay">
			{% if post.likes.count > 0 %}
			<a class="like-link" href="{% url 'like' post_id=post.id %}">
				<i class="far fa-heart"></i>
			</a>
			<p class="post-likes"><strong>{{ post.likes.count }} like{{ post.likes.count | pluralize }}</strong></p>
			{% endif %}
			{% if post.comments.count > 0 %}
				<a class="navigation-link notifica" a href="comment/{{post.id}}"><i class="fa fa-comment" aria-hidden="true"></i></a>
				<p>{{ post.comments.count }} comments</p>
				{% endif %}
		</div>
	</div>
	


<!-- Modal -->
<div class="modal fade" id="postModal{{post.id}}" tabindex="-1" aria-labelledby="postModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-fullscreen">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body" >
					<img src="{{ post.image.url }}" class="modal-img" alt="Post Image">
					<div class="text">
						<p>{{post.content|safe}}</p>
					</div>
					{% for comment in post.comments.all %}
					<div>
						<p>{{comment.comment}}</p>
					</div>
					{% endfor %}
				<div class="likes-comments">
					<a class="like-link" href="{% url 'like' post_id=post.id %}">
						<i class="far fa-heart"></i>
					</a>
					<p class="post-likes"><strong>{{ post.likes.count }} like{{ post.likes.count | pluralize }}</strong></p>
					<div class="comments-info">
					<a class="navigation-link notifica" a href="comment/{{post.id}}"><i class="fa fa-comment" aria-hidden="true"></i></a>
					<p>{{ post.comments.count }} comments</p>
					</div>
				</div>
<div class="comment-form">
	<form action="/comment/{{post.id}}" method="post">
		{% csrf_token %}
		<div class="form-group">
			{% bootstrap_form form %}
			{{ form.errors }}
		</div>
		<input type="submit" class="post-button" value="Post" name="user">
	</form>
</div>


			</div>
		</div>
	</div>
</div>
{% endfor %}
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="{% static 'js/explore.js' %}"></script>